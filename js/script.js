$("document").ready((function(){function e(){$(window).width()<992?$(".header .contacts__phone").appendTo(".header-left"):$(window).width()>992&&$(".header .contacts__phone").prependTo(".header__contacts")}$(window).resize((function(){e()})),e()}));const triggered_select=$(".block, .card__btn");let triggered_blocks=localStorage.getItem("triggered_blocks")?JSON.parse(localStorage.getItem("triggered_blocks")):[];function initBlocks(e){e.filter((function(e,t){if(-1!=triggered_blocks.indexOf($(t).data("slide")))return t})).each((function(){$(this).addClass("active"),$(this).find(".block__icon img").attr("src",$(this).find(".block__icon img").attr("src").replace(/\./g,"_active."))})),e.filter((function(e,t){if(-1==triggered_blocks.indexOf($(t).data("slide")))return t})).each((function(){$(this).removeClass("active"),$(this).find(".block__icon img").attr("src",$(this).find(".block__icon img").attr("src").replace(/_active/g,""))}));$(".submit-application-select__title > span").text($(".block.active").length)}triggered_select.click((function(){let e=$(this),t=e.data("slide");if(-1==$.inArray(t,triggered_blocks))triggered_blocks.push(t);else{if(0==e.hasClass("block"))return;triggered_blocks=$.grep(triggered_blocks,(function(e){return e!=t}))}localStorage.setItem("triggered_blocks",JSON.stringify(triggered_blocks)),initBlocks($(`.block[data-slide="${t}"]`))})),initBlocks($(".block")),$(".card").each((function(){let e=$(this).find(".gallery__image img"),t=e[Math.floor(Math.random()*e.length)].src;$(this).css("background-image",`url("${t}")`)}));let images=$(".gallery__image");function progressBar(){$(window).scrollTop(),$(window).height();let e=$(window).height(),t=$(document).height()-e,i=$(window).scrollTop()/t*100,o=$(".header__cover").height()/t*100;if(i<o){let e=(100-o+o-2*i)/100;if(e>.85)return;$(".header__cover").css("opacity",e)}}function throttle(e,t,i){let o=localStorage.getItem(`time-${i}`)?localStorage.getItem(`time-${i}`):void 0;return function(...r){null==o&&(o=$.now(),localStorage.setItem(`time-${i}`,o),e(...r)),$.now()-o>t?(o=$.now(),localStorage.setItem(`time-${i}`,o),e(...r)):getAlert_error(`Подождите еще ${(t/1e3-($.now()-o)/1e3).toFixed(0)} секунд!`)}}function getAlert_succ(e){Swal.fire({position:"top-end",icon:"success",title:e,padding:"2em",width:"100%",color:"#232122",background:"#EAEAEA",showConfirmButton:!1,timer:3500,toast:!0})}function getAlert_error(e){Swal.fire({position:"top-end",icon:"error",title:e,padding:"2em",width:"100%",color:"red",background:"#EAEAEA",showConfirmButton:!1,timer:3500,toast:!0})}images.mouseover((function(){let e=$(this),t=$(this).find("img").attr("src");e.parents(".card").css("background-image",`url("${t}")`)})),$("[data-fancybox]").fancybox({}),$(window).scroll(progressBar),$('a[href^="#"]').on("click",(function(e){e.preventDefault();var t,i=$(this.hash);i.length&&(t=$(window).width()<768?120:220,$("html, body").animate({scrollTop:i.offset().top-t},400))})),$(window).on("touchmove",(function(){$('a[href^="#"]').data("clicked",!1)})),$(document).on("touchend",'a[href^="#"]',(function(e){$(this).data("clicked")&&(e.preventDefault(),$(this).data("clicked",!1))}));let owl_servcies=$(".owl-carousel--services").owlCarousel({slideSpeed:300,paginationSpeed:400,center:!0,stopOnHover:!0,autoplay:100,loop:!0,margin:50});$(".carousel-services__next").click((function(){owl_servcies.trigger("next.owl.carousel",[300])})),$(".carousel-services__prev").click((function(){owl_servcies.trigger("prev.owl.carousel",[300])})),$(".carousel-services-dot").click((function(e,t){$(".carousel-services-dots").hasClass("fixed")&&$("html, body").animate({scrollTop:$(`.card__btn[data-slide='${$(this).data("slide")}']`).parents(".card").offset().top},1e3)})),$(".card__btn").click((function(e){$(this).siblings(".card__title").text();$.fancybox.open({src:".submit-application",type:"inline",autoSize:!0})})),$(".submit-application-form").validate({rules:{phone:{required:!0},name:{required:!0}},messages:{phone:{required:"Введите номер телефона!"},name:{required:"Введите имя!"}},submitHandler:function(e){throttle((function(){let e=[];$(".block.active .block__title").each((function(){e.push($(this).text())})),$.ajax({url:"/php/submit-application.php",type:"post",data:{phone:$('.submit-application-form input[name="phone"]').val(),name:$('.submit-application-form input[name="name"]').val(),review:$('.submit-application-form textarea[name="review"').val(),selected:JSON.stringify(e)},success:function(e){getAlert_succ("Заявка успешно отправлена! Ожидайте ответа!")}})}),18e4,"submit-application")()}}),$.validator.addMethod("phone",(function(e,t){return this.optional(t)||/^\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}$/.test(e)}),"Номер введен некорректно!");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkYXB0aXZlLmpzIiwic2VsZWN0ZWRCbG9ja3MuanMiLCJjYXJkcy5qcyIsImhlYWRlcl9ib3R0b20uanMiLCJoZWxwZWQuanMiLCJmYW5jeS1ib3guanMiLCJvd2wtY2Fyb3VzZWwuanMiLCJzdWJtaXQtYXBwbGljYXRpb24uanMiXSwibmFtZXMiOlsiJCIsInJlYWR5IiwiYWRhcHRpdmUiLCJ3aW5kb3ciLCJ3aWR0aCIsImFwcGVuZFRvIiwicHJlcGVuZFRvIiwicmVzaXplIiwidHJpZ2dlcmVkX3NlbGVjdCIsInRyaWdnZXJlZF9ibG9ja3MiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwiaW5pdEJsb2NrcyIsImRhdGEiLCJmaWx0ZXIiLCJpbmRleCIsIml0ZW0iLCJpbmRleE9mIiwiZWFjaCIsInRoaXMiLCJhZGRDbGFzcyIsImZpbmQiLCJhdHRyIiwicmVwbGFjZSIsInJlbW92ZUNsYXNzIiwidGV4dCIsImxlbmd0aCIsImNsaWNrIiwidHJpZ2dlciIsImJsb2NrX2luZGV4IiwiaW5BcnJheSIsInB1c2giLCJoYXNDbGFzcyIsImdyZXAiLCJ2YWx1ZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJjYXJkX19pbWFnZXMiLCJjYXJkX19pbWFnZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInNyYyIsImNzcyIsImltYWdlcyIsInByb2dyZXNzQmFyIiwic2Nyb2xsVG9wIiwiaGVpZ2h0Iiwid2luSCIsImJhc2VYIiwiZG9jdW1lbnQiLCJhIiwiYiIsIm9wYWNpdHkiLCJ0aHJvdHRsZSIsImZ1bmMiLCJzZWNvbmRzIiwibmFtZSIsInRpbWVyIiwidW5kZWZpbmVkIiwiYXJncyIsIm5vdyIsImdldEFsZXJ0X2Vycm9yIiwidG9GaXhlZCIsImdldEFsZXJ0X3N1Y2MiLCJTd2FsIiwiZmlyZSIsInBvc2l0aW9uIiwiaWNvbiIsInRpdGxlIiwicGFkZGluZyIsImNvbG9yIiwiYmFja2dyb3VuZCIsInNob3dDb25maXJtQnV0dG9uIiwidG9hc3QiLCJtb3VzZW92ZXIiLCJ0aGlzX2ltYWdlIiwidGhpc19zcmMiLCJwYXJlbnRzIiwiZmFuY3lib3giLCJzY3JvbGwiLCJvbiIsInQiLCJwcmV2ZW50RGVmYXVsdCIsImUiLCJuIiwiaGFzaCIsImFuaW1hdGUiLCJvZmZzZXQiLCJ0b3AiLCJvd2xfc2VydmNpZXMiLCJvd2xDYXJvdXNlbCIsInNsaWRlU3BlZWQiLCJwYWdpbmF0aW9uU3BlZWQiLCJjZW50ZXIiLCJzdG9wT25Ib3ZlciIsImF1dG9wbGF5IiwibG9vcCIsIm1hcmdpbiIsImRvdCIsInNpYmxpbmdzIiwib3BlbiIsInR5cGUiLCJhdXRvU2l6ZSIsInZhbGlkYXRlIiwicnVsZXMiLCJwaG9uZSIsInJlcXVpcmVkIiwibWVzc2FnZXMiLCJzdWJtaXRIYW5kbGVyIiwiZm9ybSIsImFjdGl2YXRlZF9pdGVtcyIsImFqYXgiLCJ1cmwiLCJ2YWwiLCJyZXZpZXciLCJzZWxlY3RlZCIsInN1Y2Nlc3MiLCJ2YWxpZGF0b3IiLCJhZGRNZXRob2QiLCJlbGVtZW50Iiwib3B0aW9uYWwiLCJ0ZXN0Il0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBQSxZQUFBQyxPQUFBLFdBQ0EsU0FBQUMsSUFDQUYsRUFBQUcsUUFBQUMsUUFBQSxJQUNBSixFQUFBLDRCQUFBSyxTQUFBLGdCQUNBTCxFQUFBRyxRQUFBQyxRQUFBLEtBQ0FKLEVBQUEsNEJBQUFNLFVBQUEsb0JBRUEsQ0FFQU4sRUFBQUcsUUFBQUksUUFBQSxXQUNBTCxHQUNBLElBRUFBLEdBQ0EsSUNkQSxNQUFBTSxpQkFBQVIsRUFBQSxzQkFDQSxJQUFBUyxpQkFBQUMsYUFBQUMsUUFBQSxvQkFBQUMsS0FBQUMsTUFBQUgsYUFBQUMsUUFBQSxxQkFBQSxHQW1CQSxTQUFBRyxXQUFBQyxHQUNBQSxFQUFBQyxRQUFBLFNBQUFDLEVBQUFDLEdBQ0EsSUFBQSxHQUFBVCxpQkFBQVUsUUFBQW5CLEVBQUFrQixHQUFBSCxLQUFBLFVBQ0EsT0FBQUcsQ0FFQSxJQUFBRSxNQUFBLFdBQ0FwQixFQUFBcUIs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ZW50JykucmVhZHkoZnVuY3Rpb24oKXtcclxuICAgIGZ1bmN0aW9uIGFkYXB0aXZlKCl7XHJcbiAgICAgICAgaWYoJCh3aW5kb3cpLndpZHRoKCkgPCA5OTIpe1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVyIC5jb250YWN0c19fcGhvbmUnKS5hcHBlbmRUbygnLmhlYWRlci1sZWZ0Jyk7XHJcbiAgICAgICAgfWVsc2UgaWYoJCh3aW5kb3cpLndpZHRoKCkgPiA5OTIpe1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVyIC5jb250YWN0c19fcGhvbmUnKS5wcmVwZW5kVG8oJy5oZWFkZXJfX2NvbnRhY3RzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKXtcclxuICAgICAgICBhZGFwdGl2ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYWRhcHRpdmUoKTtcclxufSk7IiwiY29uc3QgdHJpZ2dlcmVkX3NlbGVjdCA9ICQoJy5ibG9jaywgLmNhcmRfX2J0bicpO1xyXG5sZXQgdHJpZ2dlcmVkX2Jsb2NrcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0cmlnZ2VyZWRfYmxvY2tzJykgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0cmlnZ2VyZWRfYmxvY2tzJykpIDpbXTtcclxuXHJcbnRyaWdnZXJlZF9zZWxlY3QuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgIGxldCB0cmlnZ2VyID0gJCh0aGlzKTtcclxuICAgIGxldCBibG9ja19pbmRleCA9IHRyaWdnZXIuZGF0YSgnc2xpZGUnKTtcclxuXHJcbiAgICBpZigkLmluQXJyYXkoYmxvY2tfaW5kZXgsIHRyaWdnZXJlZF9ibG9ja3MpID09IC0xKXtcclxuICAgICAgICB0cmlnZ2VyZWRfYmxvY2tzLnB1c2goYmxvY2tfaW5kZXgpO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgaWYodHJpZ2dlci5oYXNDbGFzcygnYmxvY2snKSA9PSBmYWxzZSkgcmV0dXJuO1xyXG4gICAgICAgIHRyaWdnZXJlZF9ibG9ja3MgPSAkLmdyZXAodHJpZ2dlcmVkX2Jsb2NrcywgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlICE9IGJsb2NrX2luZGV4O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0cmlnZ2VyZWRfYmxvY2tzJywgSlNPTi5zdHJpbmdpZnkodHJpZ2dlcmVkX2Jsb2NrcykpO1xyXG4gICAgaW5pdEJsb2NrcygkKGAuYmxvY2tbZGF0YS1zbGlkZT1cIiR7YmxvY2tfaW5kZXh9XCJdYCkpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGluaXRCbG9ja3MoZGF0YSl7XHJcbiAgICBsZXQgaGF2ZWRfYXJyID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24oaW5kZXgsIGl0ZW0pe1xyXG4gICAgICAgIGlmKHRyaWdnZXJlZF9ibG9ja3MuaW5kZXhPZigkKGl0ZW0pLmRhdGEoJ3NsaWRlJykpICE9IC0xKXtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgfVxyXG4gICAgfSkuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAkKHRoaXMpLmZpbmQoJy5ibG9ja19faWNvbiBpbWcnKS5hdHRyKCdzcmMnLCAkKHRoaXMpLmZpbmQoJy5ibG9ja19faWNvbiBpbWcnKS5hdHRyKCdzcmMnKS5yZXBsYWNlKC9cXC4vZywnX2FjdGl2ZS4nKSk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgbGV0IGNsZWFyX2FyciA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uKGluZGV4LCBpdGVtKXtcclxuICAgICAgICBpZih0cmlnZ2VyZWRfYmxvY2tzLmluZGV4T2YoJChpdGVtKS5kYXRhKCdzbGlkZScpKSA9PSAtMSl7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgIH1cclxuICAgIH0pLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJy5ibG9ja19faWNvbiBpbWcnKS5hdHRyKCdzcmMnLCAkKHRoaXMpLmZpbmQoJy5ibG9ja19faWNvbiBpbWcnKS5hdHRyKCdzcmMnKS5yZXBsYWNlKC9fYWN0aXZlL2csICcnKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuc3VibWl0LWFwcGxpY2F0aW9uLXNlbGVjdF9fdGl0bGUgPiBzcGFuJykudGV4dCgkKCcuYmxvY2suYWN0aXZlJykubGVuZ3RoKTtcclxufVxyXG5cclxuXHJcblxyXG5pbml0QmxvY2tzKCQoJy5ibG9jaycpKTsiLCJcclxuJCgnLmNhcmQnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgbGV0IGNhcmRfX2ltYWdlcyA9ICQodGhpcykuZmluZCgnLmdhbGxlcnlfX2ltYWdlIGltZycpO1xyXG4gIGxldCBjYXJkX19pbWFnZSA9IGNhcmRfX2ltYWdlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqY2FyZF9faW1hZ2VzLmxlbmd0aCldLnNyYztcclxuICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsIGB1cmwoXCIke2NhcmRfX2ltYWdlfVwiKWApO1xyXG59KTtcclxuXHJcbmxldCBpbWFnZXMgPSAkKCcuZ2FsbGVyeV9faW1hZ2UnKTtcclxuXHJcbmltYWdlcy5tb3VzZW92ZXIoZnVuY3Rpb24oKXtcclxuICBsZXQgdGhpc19pbWFnZSA9ICQodGhpcyk7XHJcbiAgbGV0IHRoaXNfc3JjID0gJCh0aGlzKS5maW5kKCdpbWcnKS5hdHRyKCdzcmMnKTtcclxuICBcclxuICB0aGlzX2ltYWdlLnBhcmVudHMoJy5jYXJkJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgYHVybChcIiR7dGhpc19zcmN9XCIpYCk7XHJcbn0pO1xyXG4iLCJmdW5jdGlvbiBwcm9ncmVzc0JhcigpIHtcclxuICAgIGxldCBzY3JvbGxQb3MgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcbiAgICBsZXQgV2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG5cclxuXHJcbiAgICBsZXQgd2luSCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuICAgIGxldCBkb2NIID0gJChkb2N1bWVudCkuaGVpZ2h0KCk7XHJcblxyXG5cclxuXHJcbiAgICBsZXQgYmFzZVggPSBkb2NIIC0gd2luSDtcclxuXHJcbiAgICBsZXQgYSA9ICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgLyBiYXNlWCkgKiAxMDA7XHJcbiAgICBsZXQgYiA9ICgkKCcuaGVhZGVyX19jb3ZlcicpLmhlaWdodCgpIC8gYmFzZVgpICogMTAwO1xyXG5cclxuICAgIGlmKGEgPCBiKXtcclxuICAgICAgICBsZXQgc3BlZWQgPSBhICogMjtcclxuICAgICAgICBsZXQgb2Zmc2V0ID0gKDEwMCAtIGIpICsgYjtcclxuICAgICAgICBsZXQgb3BhY2l0eSA9IChvZmZzZXQgLSBzcGVlZCkgLyAxMDA7XHJcblxyXG5cclxuICAgICAgICBpZihvcGFjaXR5ID4gMC44NSkgcmV0dXJuO1xyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXJfX2NvdmVyJykuY3NzKCdvcGFjaXR5Jywgb3BhY2l0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuXHJcblxyXG5cclxuJCh3aW5kb3cpLnNjcm9sbChwcm9ncmVzc0Jhcik7IiwiZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgc2Vjb25kcywgbmFtZSl7XHJcbiAgICBsZXQgdGltZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgdGltZS0ke25hbWV9YCkgPyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgdGltZS0ke25hbWV9YCkgOiB1bmRlZmluZWQ7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncyl7XHJcbiAgICAgICAgaWYodGltZXIgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGltZXIgPSAkLm5vdygpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgdGltZS0ke25hbWV9YCwgdGltZXIpO1xyXG4gICAgICAgICAgICBmdW5jKC4uLmFyZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZigkLm5vdygpIC0gdGltZXIgPiBzZWNvbmRzKXtcclxuICAgICAgICAgICAgdGltZXIgPSAkLm5vdygpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgdGltZS0ke25hbWV9YCwgdGltZXIpO1xyXG4gICAgICAgICAgICBmdW5jKC4uLmFyZ3MpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBnZXRBbGVydF9lcnJvcihg0J/QvtC00L7QttC00LjRgtC1INC10YnQtSAkeyhzZWNvbmRzIC8gMTAwMCAtICgkLm5vdygpIC0gdGltZXIpIC8gMTAwMCkudG9GaXhlZCgwKX0g0YHQtdC60YPQvdC0IWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGdldEFsZXJ0X3N1Y2ModGV4dCl7XHJcbiAgICBTd2FsLmZpcmUoe1xyXG4gICAgICAgIHBvc2l0aW9uOiAndG9wLWVuZCcsXHJcbiAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIHRpdGxlOiB0ZXh0LFxyXG4gICAgICAgIHBhZGRpbmc6ICcyZW0nLFxyXG5cclxuICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgIGNvbG9yOiAnIzIzMjEyMicsXHJcbiAgICAgICAgYmFja2dyb3VuZDogJyNFQUVBRUEnLFxyXG5cclxuICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsXHJcbiAgICAgICAgdGltZXI6IDM1MDAsXHJcblxyXG4gICAgICAgIHRvYXN0OiB0cnVlLFxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QWxlcnRfZXJyb3IodGV4dCl7XHJcbiAgU3dhbC5maXJlKHtcclxuICAgICAgcG9zaXRpb246ICd0b3AtZW5kJyxcclxuICAgICAgaWNvbjogJ2Vycm9yJyxcclxuICAgICAgdGl0bGU6IHRleHQsXHJcbiAgICAgIHBhZGRpbmc6ICcyZW0nLFxyXG5cclxuICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgY29sb3I6ICdyZWQnLFxyXG4gICAgICBiYWNrZ3JvdW5kOiAnI0VBRUFFQScsXHJcblxyXG4gICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsXHJcbiAgICAgIHRpbWVyOiAzNTAwLFxyXG5cclxuICAgICAgdG9hc3Q6IHRydWUsXHJcbiAgfSlcclxufVxyXG5cclxuXHJcbiQoJ2FbaHJlZl49XCIjXCJdJykub24oXCJjbGlja1wiLCBmdW5jdGlvbih0KSB7XHJcbiAgICB0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgZSwgbiA9ICQodGhpcy5oYXNoKTtcclxuICAgIG4ubGVuZ3RoICYmIChlID0gJCh3aW5kb3cpLndpZHRoKCkgPCA3NjggPyAxMjAgOiAyMjAsICQoXCJodG1sLCBib2R5XCIpLmFuaW1hdGUoe1xyXG4gICAgICAgIHNjcm9sbFRvcDogbi5vZmZzZXQoKS50b3AgLSBlXHJcbiAgICB9LCA0MDApKVxyXG59KSwgJCh3aW5kb3cpLm9uKFwidG91Y2htb3ZlXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgJCgnYVtocmVmXj1cIiNcIl0nKS5kYXRhKFwiY2xpY2tlZFwiLCAhMSlcclxufSksICQoZG9jdW1lbnQpLm9uKFwidG91Y2hlbmRcIiwgJ2FbaHJlZl49XCIjXCJdJywgZnVuY3Rpb24odCkge1xyXG4gICAgJCh0aGlzKS5kYXRhKFwiY2xpY2tlZFwiKSAmJiAodC5wcmV2ZW50RGVmYXVsdCgpLCAkKHRoaXMpLmRhdGEoXCJjbGlja2VkXCIsICExKSlcclxufSkiLCIkKFwiW2RhdGEtZmFuY3lib3hdXCIpLmZhbmN5Ym94KHtcclxufSk7IiwiLyogbGV0IG93bF9jYXJkcyA9ICQoXCIub3dsLWNhcm91c2VsLS1jYXJkc1wiKS5vd2xDYXJvdXNlbCh7XHJcbiAgICBzbGlkZVNwZWVkOiAzMDAsXHJcbiAgICBwYWdpbmF0aW9uU3BlZWQ6IDQwMCxcclxuICAgIGl0ZW1zOiAxLFxyXG4gICAgICBhdXRvcGxheTogMTAwMCxcclxuICAgIHN0b3BPbkhvdmVyOiB0cnVlLFxyXG4gICAgbG9vcDogdHJ1ZSxcclxufSk7XHJcblxyXG5mdW5jdGlvbiBtb3ZlVG9TbGlkZShpbmRleF9zbGlkZSl7XHJcbiAgICBvd2xfY2FyZHMudHJpZ2dlcigndG8ub3dsLmNhcm91c2VsJywgW2luZGV4X3NsaWRlLCAxMDAwLCAxMDAwXSk7XHJcblxyXG4gICAgbGV0IGl0ZW0gPSAkKCcub3dsLWl0ZW0nKVtpbmRleF9zbGlkZSArIDFdO1xyXG4gICAgJChbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudC5ib2R5XSkuYW5pbWF0ZSh7XHJcbiAgICAgICAgc2Nyb2xsVG9wOiAkKGl0ZW0pLm9mZnNldCgpLnRvcFxyXG4gICAgfSwgNTAwKTtcclxufVxyXG5cclxuJCgnLmNhcmRzLW5hdl9fbmV4dCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgb3dsX2NhcmRzLnRyaWdnZXIoJ25leHQub3dsLmNhcm91c2VsJyk7XHJcbn0pXHJcblxyXG4kKCcuY2FyZHMtbmF2X19wcmV2JykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICBvd2xfY2FyZHMudHJpZ2dlcigncHJldi5vd2wuY2Fyb3VzZWwnLCBbMzAwXSk7XHJcbn0pXHJcbiAqL1xyXG5cclxuXHJcblxyXG5sZXQgb3dsX3NlcnZjaWVzID0gJCgnLm93bC1jYXJvdXNlbC0tc2VydmljZXMnKS5vd2xDYXJvdXNlbCh7XHJcbiAgICBzbGlkZVNwZWVkOiAzMDAsXHJcbiAgICBwYWdpbmF0aW9uU3BlZWQ6IDQwMCxcclxuICAgIGNlbnRlcjogdHJ1ZSxcclxuICAgIHN0b3BPbkhvdmVyOiB0cnVlLFxyXG4gICAgYXV0b3BsYXk6IDEwMCxcclxuICAgIGxvb3A6IHRydWUsXHJcbiAgICBtYXJnaW46IDUwLFxyXG59KTtcclxuXHJcblxyXG5cclxuLyogXHJcbiQoJy5jYXJvdXNlbC1zZXJ2aWNlcy1kb3QnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICBvd2xfc2VydmNpZXMudHJpZ2dlcigndG8ub3dsLmNhcm91c2VsJywgWyQodGhpcykuaW5kZXgoKSwgMzAwXSk7XHJcbiAgfSk7XHJcbiAqL1xyXG4kKCcuY2Fyb3VzZWwtc2VydmljZXNfX25leHQnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIG93bF9zZXJ2Y2llcy50cmlnZ2VyKCduZXh0Lm93bC5jYXJvdXNlbCcsIFszMDBdKTtcclxufSlcclxuXHJcbiQoJy5jYXJvdXNlbC1zZXJ2aWNlc19fcHJldicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgb3dsX3NlcnZjaWVzLnRyaWdnZXIoJ3ByZXYub3dsLmNhcm91c2VsJywgWzMwMF0pO1xyXG59KVxyXG5cclxuXHJcblxyXG5cclxuJCgnLmNhcm91c2VsLXNlcnZpY2VzLWRvdCcpLmNsaWNrKGZ1bmN0aW9uKGluZGV4LCBkb3Qpe1xyXG4gICAgaWYoJCgnLmNhcm91c2VsLXNlcnZpY2VzLWRvdHMnKS5oYXNDbGFzcygnZml4ZWQnKSl7XHJcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDogJChgLmNhcmRfX2J0bltkYXRhLXNsaWRlPSckeyQodGhpcykuZGF0YSgnc2xpZGUnKX0nXWApLnBhcmVudHMoJy5jYXJkJykub2Zmc2V0KCkudG9wfSwgMTAwMCk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLyogb3dsX3NlcnZjaWVzLm9uKCdjaGFuZ2VkLm93bC5jYXJvdXNlbCcsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgIHNldFRpbWVvdXQoKCkgPT57XHJcblxyXG5cclxuICAgICQoJy5vd2wtaXRlbScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICBsZXQgY3VycmVudCA9ICQodGhpcyk7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRfaW1nID0gY3VycmVudC5maW5kKCdpbWcnKTtcclxuICAgICAgICBsZXQgY3VycmVudF9pbWdTcmMgPSBjdXJyZW50X2ltZy5hdHRyKCdzcmMnKTtcclxuXHJcbiAgICAgICAgaWYoL19hY3RpdmUvZy50ZXN0KGN1cnJlbnRfaW1nU3JjKSA9PSB0cnVlKXtcclxuICAgICAgICAgICAgY3VycmVudF9pbWcuYXR0cignc3JjJywgY3VycmVudF9pbWdTcmMucmVwbGFjZSgvX2FjdGl2ZS9nLCAnJykpOyAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRfc2xpZGVJbmRleCA9IGN1cnJlbnRfaW1nLmRhdGEoJ3NsaWRlJyk7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRfZG90ID0gJChgLmNhcm91c2VsLXNlcnZpY2VzLWRvdFtkYXRhLXNsaWRlPVwiJHtjdXJyZW50X3NsaWRlSW5kZXh9XCJdYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY3VycmVudF9kb3QuY3NzKHsgJ3RyYW5zZm9ybSc6ICdyb3RhdGUoMCknfSk7XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgbGV0IGNlbnRlcl9pdGVtID0gJCgnLm93bC1pdGVtLmNlbnRlcicpO1xyXG4gICAgbGV0IGNlbnRlcl9pdGVtX19pbWcgPSBjZW50ZXJfaXRlbS5maW5kKCdpbWcnKTtcclxuICAgIGxldCBjZW50ZXJfaXRlbV9faW1nU3JjID0gY2VudGVyX2l0ZW1fX2ltZy5hdHRyKCdzcmMnKTtcclxuICAgIGNlbnRlcl9pdGVtX19pbWcuYXR0cignc3JjJywgY2VudGVyX2l0ZW1fX2ltZ1NyYy5yZXBsYWNlKC9cXC4vZywnX2FjdGl2ZS4nKSk7XHJcblxyXG4gICAgbGV0IGNlbnRlcl9zbGlkZUluZGV4ID0gY2VudGVyX2l0ZW1fX2ltZy5kYXRhKCdzbGlkZScpO1xyXG4gICAgbGV0IGNlbnRlcl9kb3QgPSAkKGAuY2Fyb3VzZWwtc2VydmljZXMtZG90W2RhdGEtc2xpZGU9XCIke2NlbnRlcl9zbGlkZUluZGV4fVwiXWApO1xyXG5cclxuICAgIHZhciBjZW50ZXJfaXRlbVJvdGF0ZSA9IE1hdGgucmFuZG9tKCkgKiAoMjYgLSAtMjYpICsgLTI2O1xyXG4gICAgY2VudGVyX2RvdC5jc3MoeyAndHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgY2VudGVyX2l0ZW1Sb3RhdGUgKyAnZGVnKSd9KTtcclxuXHJcblxyXG5cclxuICAgIGxldCBjZW50ZXJfY2FyZCA9ICQoYC5jYXJkW2RhdGEtc2xpZGU9XCIke2NlbnRlcl9zbGlkZUluZGV4fVwiXWApO1xyXG4gICAgXHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDogY2VudGVyX2NhcmQub2Zmc2V0KCkudG9wfSwgMjAwMCk7XHJcbiAgICB9LCAxMDAwKTtcclxuXHJcbiAgICB9LCA1MDApO1xyXG59KTsgKi9cclxuIiwiJCgnLmNhcmRfX2J0bicpLmNsaWNrKGZ1bmN0aW9uKGUpe1xyXG4gICAgbGV0IGNhcmRfbmFtZSA9ICQodGhpcykuc2libGluZ3MoJy5jYXJkX190aXRsZScpLnRleHQoKTtcclxuXHJcblxyXG4gICAgJC5mYW5jeWJveC5vcGVuKHtcclxuICAgICAgICBzcmM6ICcuc3VibWl0LWFwcGxpY2F0aW9uJyxcclxuICAgICAgICB0eXBlOiAnaW5saW5lJyxcclxuLyogICAgICAgICBoZWlnaHQ6IDg3MCxcclxuICAgICAgICB3aWR0aDogNjAwLCAqL1xyXG4gICAgICAgIGF1dG9TaXplOiB0cnVlLFxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuJCgnLnN1Ym1pdC1hcHBsaWNhdGlvbi1mb3JtJykudmFsaWRhdGUoe1xyXG4gICAgcnVsZXM6IHtcclxuICAgICAgICBwaG9uZToge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBuYW1lOiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgIG1lc3NhZ2VzOiB7XHJcbiAgICAgICAgcGhvbmU6IHtcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IFwi0JLQstC10LTQuNGC0LUg0L3QvtC80LXRgCDRgtC10LvQtdGE0L7QvdCwIVwiXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbmFtZToge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogXCLQktCy0LXQtNC40YLQtSDQuNC80Y8hXCJcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAgICAgc3VibWl0SGFuZGxlcjogZnVuY3Rpb24oZm9ybSkge1xyXG4gICAgICAgICAgICB0aHJvdHRsZShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGFjdGl2YXRlZF9pdGVtcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICQoJy5ibG9jay5hY3RpdmUgLmJsb2NrX190aXRsZScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWRfaXRlbXMucHVzaCgkKHRoaXMpLnRleHQoKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9waHAvc3VibWl0LWFwcGxpY2F0aW9uLnBocCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bvc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6ICQoJy5zdWJtaXQtYXBwbGljYXRpb24tZm9ybSBpbnB1dFtuYW1lPVwicGhvbmVcIl0nKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJCgnLnN1Ym1pdC1hcHBsaWNhdGlvbi1mb3JtIGlucHV0W25hbWU9XCJuYW1lXCJdJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldmlldzogJCgnLnN1Ym1pdC1hcHBsaWNhdGlvbi1mb3JtIHRleHRhcmVhW25hbWU9XCJyZXZpZXdcIicpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogSlNPTi5zdHJpbmdpZnkoYWN0aXZhdGVkX2l0ZW1zKSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0QWxlcnRfc3VjYygn0JfQsNGP0LLQutCwINGD0YHQv9C10YjQvdC+INC+0YLQv9GA0LDQstC70LXQvdCwISDQntC20LjQtNCw0LnRgtC1INC+0YLQstC10YLQsCEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTsgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSwgMTgwMDAwLCAnc3VibWl0LWFwcGxpY2F0aW9uJykoKTtcclxuICAgICAgICB9XHJcbn0pO1xyXG5cclxuXHJcbiQudmFsaWRhdG9yLmFkZE1ldGhvZChcInBob25lXCIsIGZ1bmN0aW9uKHZhbHVlLCBlbGVtZW50KSB7XHJcbiAgICByZXR1cm4gdGhpcy5vcHRpb25hbChlbGVtZW50KSB8fCAvXlxcKz9cXGR7MSw0fT9bLS5cXHNdP1xcKD9cXGR7MSwzfT9cXCk/Wy0uXFxzXT9cXGR7MSw0fVstLlxcc10/XFxkezEsNH1bLS5cXHNdP1xcZHsxLDl9JC8udGVzdCh2YWx1ZSk7XHJcbiAgICB9LCBcItCd0L7QvNC10YAg0LLQstC10LTQtdC9INC90LXQutC+0YDRgNC10LrRgtC90L4hXCIpOyJdfQ==

window.onload=function(){$(".preloader").addClass("hidden"),$("body").addClass("unlock")},$("document").ready((function(){function e(){$(window).width()<992?$(".header .contacts__phone").appendTo(".header-left"):$(window).width()>992&&$(".header .contacts__phone").prependTo(".header__contacts")}$(window).resize((function(){e()})),e()}));const triggered_select=$(".block, .card__btn");let triggered_blocks=localStorage.getItem("triggered_blocks")?JSON.parse(localStorage.getItem("triggered_blocks")):[];function initBlocks(e){e.filter((function(e,t){if(-1!=triggered_blocks.indexOf($(t).data("slide")))return t})).each((function(){$(this).addClass("active"),$(this).find(".block__icon img").attr("src",$(this).find(".block__icon img").attr("src").replace(/\./g,"_active."))})),e.filter((function(e,t){if(-1==triggered_blocks.indexOf($(t).data("slide")))return t})).each((function(){$(this).removeClass("active"),$(this).find(".block__icon img").attr("src",$(this).find(".block__icon img").attr("src").replace(/_active/g,""))}));$(".submit-application-select__title > span").text($(".block.active").length)}triggered_select.click((function(){let e=$(this),t=e.data("slide");if(-1==$.inArray(t,triggered_blocks))triggered_blocks.push(t);else{if(0==e.hasClass("block"))return;triggered_blocks=$.grep(triggered_blocks,(function(e){return e!=t}))}localStorage.setItem("triggered_blocks",JSON.stringify(triggered_blocks)),initBlocks($(`.block[data-slide="${t}"]`))})),initBlocks($(".block")),$(".card").each((function(){let e=$(this).find(".gallery__image img"),t=e[Math.floor(Math.random()*e.length)].src;$(this).css("background-image",`url("${t}")`)}));let images=$(".gallery__image");function progressBar(){$(window).scrollTop(),$(window).height();let e=$(window).height(),t=$(document).height()-e,i=$(window).scrollTop()/t*100,o=$(".header__cover").height()/t*100;if(i<o){let e=(100-o+o-2*i)/100;if(e>.85)return;$(".header__cover").css("opacity",e)}}function throttle(e,t,i){let o=localStorage.getItem(`time-${i}`)?localStorage.getItem(`time-${i}`):void 0;return function(...r){null==o&&(o=$.now(),localStorage.setItem(`time-${i}`,o),e(...r)),$.now()-o>t?(o=$.now(),localStorage.setItem(`time-${i}`,o),e(...r)):getAlert_error(`Подождите еще ${(t/1e3-($.now()-o)/1e3).toFixed(0)} секунд!`)}}function getAlert_succ(e){Swal.fire({position:"top-end",icon:"success",title:e,padding:"2em",width:"100%",color:"#232122",background:"#EAEAEA",showConfirmButton:!1,timer:3500,toast:!0})}function getAlert_error(e){Swal.fire({position:"top-end",icon:"error",title:e,padding:"2em",width:"100%",color:"red",background:"#EAEAEA",showConfirmButton:!1,timer:3500,toast:!0})}images.mouseover((function(){let e=$(this),t=$(this).find("img").attr("src");e.parents(".card").css("background-image",`url("${t}")`)})),$("[data-fancybox]").fancybox({touch:!1}),$(window).scroll(progressBar),$('a[href^="#"]').on("click",(function(e){e.preventDefault();var t,i=$(this.hash);i.length&&(t=$(window).width()<768?120:220,$("html, body").animate({scrollTop:i.offset().top-t},400))})),$(window).on("touchmove",(function(){$('a[href^="#"]').data("clicked",!1)})),$(document).on("touchend",'a[href^="#"]',(function(e){$(this).data("clicked")&&(e.preventDefault(),$(this).data("clicked",!1))}));let owl_servcies=$(".owl-carousel--services").owlCarousel({slideSpeed:300,paginationSpeed:400,center:!0,stopOnHover:!0,autoplay:100,loop:!0,margin:50});$(".carousel-services__next").click((function(){owl_servcies.trigger("next.owl.carousel",[300])})),$(".carousel-services__prev").click((function(){owl_servcies.trigger("prev.owl.carousel",[300])})),$(".carousel-services-dot").click((function(e,t){$(".carousel-services-dots").hasClass("fixed")&&$("html, body").animate({scrollTop:$(`.card__btn[data-slide='${$(this).data("slide")}']`).parents(".card").offset().top},1e3)})),$(".card__btn").click((function(e){$(this).siblings(".card__title").text();$.fancybox.open({src:".submit-application",type:"inline",touch:!1,autoSize:!0})})),$(".submit-application-form").validate({rules:{phone:{required:!0},name:{required:!0}},messages:{phone:{required:"Введите номер телефона!"},name:{required:"Введите имя!"}},submitHandler:function(e){throttle((function(){let e=[];$(".block.active .block__title").each((function(){e.push($(this).text())})),$.ajax({url:"/php/submit-application.php",type:"post",data:{phone:$('.submit-application-form input[name="phone"]').val(),name:$('.submit-application-form input[name="name"]').val(),review:$('.submit-application-form textarea[name="review"').val(),selected:JSON.stringify(e)},success:function(e){getAlert_succ("Заявка успешно отправлена! Ожидайте ответа!")}})}),18e4,"submit-application")()}}),$.validator.addMethod("phone",(function(e,t){return this.optional(t)||/^\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}$/.test(e)}),"Номер введен некорректно!");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByZWxvYWRlci5qcyIsImFkYXB0aXZlLmpzIiwic2VsZWN0ZWRCbG9ja3MuanMiLCJjYXJkcy5qcyIsImhlYWRlcl9ib3R0b20uanMiLCJoZWxwZWQuanMiLCJmYW5jeS1ib3guanMiLCJvd2wtY2Fyb3VzZWwuanMiLCJzdWJtaXQtYXBwbGljYXRpb24uanMiXSwibmFtZXMiOlsid2luZG93Iiwib25sb2FkIiwiJCIsImFkZENsYXNzIiwicmVhZHkiLCJhZGFwdGl2ZSIsIndpZHRoIiwiYXBwZW5kVG8iLCJwcmVwZW5kVG8iLCJyZXNpemUiLCJ0cmlnZ2VyZWRfc2VsZWN0IiwidHJpZ2dlcmVkX2Jsb2NrcyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJpbml0QmxvY2tzIiwiZGF0YSIsImZpbHRlciIsImluZGV4IiwiaXRlbSIsImluZGV4T2YiLCJlYWNoIiwidGhpcyIsImZpbmQiLCJhdHRyIiwicmVwbGFjZSIsInJlbW92ZUNsYXNzIiwidGV4dCIsImxlbmd0aCIsImNsaWNrIiwidHJpZ2dlciIsImJsb2NrX2luZGV4IiwiaW5BcnJheSIsInB1c2giLCJoYXNDbGFzcyIsImdyZXAiLCJ2YWx1ZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJjYXJkX19pbWFnZXMiLCJjYXJkX19pbWFnZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInNyYyIsImNzcyIsImltYWdlcyIsInByb2dyZXNzQmFyIiwic2Nyb2xsVG9wIiwiaGVpZ2h0Iiwid2luSCIsImJhc2VYIiwiZG9jdW1lbnQiLCJhIiwiYiIsIm9wYWNpdHkiLCJ0aHJvdHRsZSIsImZ1bmMiLCJzZWNvbmRzIiwibmFtZSIsInRpbWVyIiwidW5kZWZpbmVkIiwiYXJncyIsIm5vdyIsImdldEFsZXJ0X2Vycm9yIiwidG9GaXhlZCIsImdldEFsZXJ0X3N1Y2MiLCJTd2FsIiwiZmlyZSIsInBvc2l0aW9uIiwiaWNvbiIsInRpdGxlIiwicGFkZGluZyIsImNvbG9yIiwiYmFja2dyb3VuZCIsInNob3dDb25maXJtQnV0dG9uIiwidG9hc3QiLCJtb3VzZW92ZXIiLCJ0aGlzX2ltYWdlIiwidGhpc19zcmMiLCJwYXJlbnRzIiwiZmFuY3lib3giLCJ0b3VjaCIsInNjcm9sbCIsIm9uIiwidCIsInByZXZlbnREZWZhdWx0IiwiZSIsIm4iLCJoYXNoIiwiYW5pbWF0ZSIsIm9mZnNldCIsInRvcCIsIm93bF9zZXJ2Y2llcyIsIm93bENhcm91c2VsIiwic2xpZGVTcGVlZCIsInBhZ2luYXRpb25TcGVlZCIsImNlbnRlciIsInN0b3BPbkhvdmVyIiwiYXV0b3BsYXkiLCJsb29wIiwibWFyZ2luIiwiZG90Iiwic2libGluZ3MiLCJvcGVuIiwidHlwZSIsImF1dG9TaXplIiwidmFsaWRhdGUiLCJydWxlcyIsInBob25lIiwicmVxdWlyZWQiLCJtZXNzYWdlcyIsInN1Ym1pdEhhbmRsZXIiLCJmb3JtIiwiYWN0aXZhdGVkX2l0ZW1zIiwiYWpheCIsInVybCIsInZhbCIsInJldmlldyIsInNlbGVjdGVkIiwic3VjY2VzcyIsInZhbGlkYXRvciIsImFkZE1ldGhvZCIsImVsZW1lbnQiLCJvcHRpb25hbCIsInRlc3QiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFBQyxPQUFBLFdBQ0FDLEVBQUEsY0FBQUMsU0FBQSxVQUNBRCxFQUFBLFFBQUFDLFNBQUEsU0FDQSxFQ0hBRCxFQUFBLFlBQUFFLE9BQUEsV0FDQSxTQUFBQyxJQUNBSCxFQUFBRixRQUFBTSxRQUFBLElBQ0FKLEVBQUEsNEJBQUFLLFNBQUEsZ0JBQ0FMLEVBQUFGLFFBQUFNLFFBQUEsS0FDQUosRUFBQSw0QkFBQU0sVUFBQSxvQkFFQSxDQUVBTixFQUFBRixRQUFBUyxRQUFBLFdBQ0FKLEdBQ0EsSUFFQUEsR0FDQSxJQ2RBLE1BQUFLLGlCQUFBUixFQUFBLHNCQUNBLElBQUFTLGlCQUFBQyxhQUFBQyxRQUFBLG9CQUFBQyxLQUFBQyxNQUFBSCxhQUFBQyxRQUFBLHFCQUFBLEdBbUJBLFNBQUFHLFdBQUFDLEdBQ0FBLEVBQUFDLFFBQUEsU0FB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U0FBQXRGLEVBQUF1RixHQUNBLE9BQUFyRyxLQUFBc0csU0FBQUQsSUFBQSwrRUFBQUUsS0FBQXpGLEVBQ0EsR0FBQSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKXtcclxuICAgICQoJy5wcmVsb2FkZXInKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3VubG9jaycpO1xyXG4gIH07IiwiJCgnZG9jdW1lbnQnKS5yZWFkeShmdW5jdGlvbigpe1xyXG4gICAgZnVuY3Rpb24gYWRhcHRpdmUoKXtcclxuICAgICAgICBpZigkKHdpbmRvdykud2lkdGgoKSA8IDk5Mil7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXIgLmNvbnRhY3RzX19waG9uZScpLmFwcGVuZFRvKCcuaGVhZGVyLWxlZnQnKTtcclxuICAgICAgICB9ZWxzZSBpZigkKHdpbmRvdykud2lkdGgoKSA+IDk5Mil7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXIgLmNvbnRhY3RzX19waG9uZScpLnByZXBlbmRUbygnLmhlYWRlcl9fY29udGFjdHMnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpe1xyXG4gICAgICAgIGFkYXB0aXZlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhZGFwdGl2ZSgpO1xyXG59KTsiLCJjb25zdCB0cmlnZ2VyZWRfc2VsZWN0ID0gJCgnLmJsb2NrLCAuY2FyZF9fYnRuJyk7XHJcbmxldCB0cmlnZ2VyZWRfYmxvY2tzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RyaWdnZXJlZF9ibG9ja3MnKSA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RyaWdnZXJlZF9ibG9ja3MnKSkgOltdO1xyXG5cclxudHJpZ2dlcmVkX3NlbGVjdC5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgbGV0IHRyaWdnZXIgPSAkKHRoaXMpO1xyXG4gICAgbGV0IGJsb2NrX2luZGV4ID0gdHJpZ2dlci5kYXRhKCdzbGlkZScpO1xyXG5cclxuICAgIGlmKCQuaW5BcnJheShibG9ja19pbmRleCwgdHJpZ2dlcmVkX2Jsb2NrcykgPT0gLTEpe1xyXG4gICAgICAgIHRyaWdnZXJlZF9ibG9ja3MucHVzaChibG9ja19pbmRleCk7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBpZih0cmlnZ2VyLmhhc0NsYXNzKCdibG9jaycpID09IGZhbHNlKSByZXR1cm47XHJcbiAgICAgICAgdHJpZ2dlcmVkX2Jsb2NrcyA9ICQuZ3JlcCh0cmlnZ2VyZWRfYmxvY2tzLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgIT0gYmxvY2tfaW5kZXg7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RyaWdnZXJlZF9ibG9ja3MnLCBKU09OLnN0cmluZ2lmeSh0cmlnZ2VyZWRfYmxvY2tzKSk7XHJcbiAgICBpbml0QmxvY2tzKCQoYC5ibG9ja1tkYXRhLXNsaWRlPVwiJHtibG9ja19pbmRleH1cIl1gKSk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gaW5pdEJsb2NrcyhkYXRhKXtcclxuICAgIGxldCBoYXZlZF9hcnIgPSBkYXRhLmZpbHRlcihmdW5jdGlvbihpbmRleCwgaXRlbSl7XHJcbiAgICAgICAgaWYodHJpZ2dlcmVkX2Jsb2Nrcy5pbmRleE9mKCQoaXRlbSkuZGF0YSgnc2xpZGUnKSkgIT0gLTEpe1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICB9XHJcbiAgICB9KS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICQodGhpcykuZmluZCgnLmJsb2NrX19pY29uIGltZycpLmF0dHIoJ3NyYycsICQodGhpcykuZmluZCgnLmJsb2NrX19pY29uIGltZycpLmF0dHIoJ3NyYycpLnJlcGxhY2UoL1xcLi9nLCdfYWN0aXZlLicpKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBsZXQgY2xlYXJfYXJyID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24oaW5kZXgsIGl0ZW0pe1xyXG4gICAgICAgIGlmKHRyaWdnZXJlZF9ibG9ja3MuaW5kZXhPZigkKGl0ZW0pLmRhdGEoJ3NsaWRlJykpID09IC0xKXtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgfVxyXG4gICAgfSkuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykuZmluZCgnLmJsb2NrX19pY29uIGltZycpLmF0dHIoJ3NyYycsICQodGhpcykuZmluZCgnLmJsb2NrX19pY29uIGltZycpLmF0dHIoJ3NyYycpLnJlcGxhY2UoL19hY3RpdmUvZywgJycpKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5zdWJtaXQtYXBwbGljYXRpb24tc2VsZWN0X190aXRsZSA+IHNwYW4nKS50ZXh0KCQoJy5ibG9jay5hY3RpdmUnKS5sZW5ndGgpO1xyXG59XHJcblxyXG5cclxuXHJcbmluaXRCbG9ja3MoJCgnLmJsb2NrJykpOyIsIlxyXG4kKCcuY2FyZCcpLmVhY2goZnVuY3Rpb24oKXtcclxuICBsZXQgY2FyZF9faW1hZ2VzID0gJCh0aGlzKS5maW5kKCcuZ2FsbGVyeV9faW1hZ2UgaW1nJyk7XHJcbiAgbGV0IGNhcmRfX2ltYWdlID0gY2FyZF9faW1hZ2VzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpjYXJkX19pbWFnZXMubGVuZ3RoKV0uc3JjO1xyXG4gICQodGhpcykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgYHVybChcIiR7Y2FyZF9faW1hZ2V9XCIpYCk7XHJcbn0pO1xyXG5cclxubGV0IGltYWdlcyA9ICQoJy5nYWxsZXJ5X19pbWFnZScpO1xyXG5cclxuaW1hZ2VzLm1vdXNlb3ZlcihmdW5jdGlvbigpe1xyXG4gIGxldCB0aGlzX2ltYWdlID0gJCh0aGlzKTtcclxuICBsZXQgdGhpc19zcmMgPSAkKHRoaXMpLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycpO1xyXG4gIFxyXG4gIHRoaXNfaW1hZ2UucGFyZW50cygnLmNhcmQnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCBgdXJsKFwiJHt0aGlzX3NyY31cIilgKTtcclxufSk7XHJcbiIsImZ1bmN0aW9uIHByb2dyZXNzQmFyKCkge1xyXG4gICAgbGV0IHNjcm9sbFBvcyA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuICAgIGxldCBXaW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcblxyXG5cclxuICAgIGxldCB3aW5IID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG4gICAgbGV0IGRvY0ggPSAkKGRvY3VtZW50KS5oZWlnaHQoKTtcclxuXHJcblxyXG5cclxuICAgIGxldCBiYXNlWCA9IGRvY0ggLSB3aW5IO1xyXG5cclxuICAgIGxldCBhID0gKCQod2luZG93KS5zY3JvbGxUb3AoKSAvIGJhc2VYKSAqIDEwMDtcclxuICAgIGxldCBiID0gKCQoJy5oZWFkZXJfX2NvdmVyJykuaGVpZ2h0KCkgLyBiYXNlWCkgKiAxMDA7XHJcblxyXG4gICAgaWYoYSA8IGIpe1xyXG4gICAgICAgIGxldCBzcGVlZCA9IGEgKiAyO1xyXG4gICAgICAgIGxldCBvZmZzZXQgPSAoMTAwIC0gYikgKyBiO1xyXG4gICAgICAgIGxldCBvcGFjaXR5ID0gKG9mZnNldCAtIHNwZWVkKSAvIDEwMDtcclxuXHJcblxyXG4gICAgICAgIGlmKG9wYWNpdHkgPiAwLjg1KSByZXR1cm47XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgJCgnLmhlYWRlcl9fY292ZXInKS5jc3MoJ29wYWNpdHknLCBvcGFjaXR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxufVxyXG5cclxuXHJcblxyXG4kKHdpbmRvdykuc2Nyb2xsKHByb2dyZXNzQmFyKTsiLCIkKCdhW2hyZWZePVwiI1wiXScpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24odCkge1xyXG4gICAgdC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIGUsIG4gPSAkKHRoaXMuaGFzaCk7XHJcbiAgICBuLmxlbmd0aCAmJiAoZSA9ICQod2luZG93KS53aWR0aCgpIDwgNzY4ID8gMTIwIDogMjIwLCAkKFwiaHRtbCwgYm9keVwiKS5hbmltYXRlKHtcclxuICAgICAgICBzY3JvbGxUb3A6IG4ub2Zmc2V0KCkudG9wIC0gZVxyXG4gICAgfSwgNDAwKSlcclxufSksICQod2luZG93KS5vbihcInRvdWNobW92ZVwiLCBmdW5jdGlvbigpIHtcclxuICAgICQoJ2FbaHJlZl49XCIjXCJdJykuZGF0YShcImNsaWNrZWRcIiwgITEpXHJcbn0pLCAkKGRvY3VtZW50KS5vbihcInRvdWNoZW5kXCIsICdhW2hyZWZePVwiI1wiXScsIGZ1bmN0aW9uKHQpIHtcclxuICAgICQodGhpcykuZGF0YShcImNsaWNrZWRcIikgJiYgKHQucHJldmVudERlZmF1bHQoKSwgJCh0aGlzKS5kYXRhKFwiY2xpY2tlZFwiLCAhMSkpXHJcbn0pXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHNlY29uZHMsIG5hbWUpe1xyXG4gICAgbGV0IHRpbWVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYHRpbWUtJHtuYW1lfWApID8gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYHRpbWUtJHtuYW1lfWApIDogdW5kZWZpbmVkO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3Mpe1xyXG4gICAgICAgIGlmKHRpbWVyID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHRpbWVyID0gJC5ub3coKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYHRpbWUtJHtuYW1lfWAsIHRpbWVyKTtcclxuICAgICAgICAgICAgZnVuYyguLi5hcmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYoJC5ub3coKSAtIHRpbWVyID4gc2Vjb25kcyl7XHJcbiAgICAgICAgICAgIHRpbWVyID0gJC5ub3coKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYHRpbWUtJHtuYW1lfWAsIHRpbWVyKTtcclxuICAgICAgICAgICAgZnVuYyguLi5hcmdzKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZ2V0QWxlcnRfZXJyb3IoYNCf0L7QtNC+0LbQtNC40YLQtSDQtdGJ0LUgJHsoc2Vjb25kcyAvIDEwMDAgLSAoJC5ub3coKSAtIHRpbWVyKSAvIDEwMDApLnRvRml4ZWQoMCl9INGB0LXQutGD0L3QtCFgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBnZXRBbGVydF9zdWNjKHRleHQpe1xyXG4gICAgU3dhbC5maXJlKHtcclxuICAgICAgICBwb3NpdGlvbjogJ3RvcC1lbmQnLFxyXG4gICAgICAgIGljb246ICdzdWNjZXNzJyxcclxuICAgICAgICB0aXRsZTogdGV4dCxcclxuICAgICAgICBwYWRkaW5nOiAnMmVtJyxcclxuXHJcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICBjb2xvcjogJyMyMzIxMjInLFxyXG4gICAgICAgIGJhY2tncm91bmQ6ICcjRUFFQUVBJyxcclxuXHJcbiAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLFxyXG4gICAgICAgIHRpbWVyOiAzNTAwLFxyXG5cclxuICAgICAgICB0b2FzdDogdHJ1ZSxcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEFsZXJ0X2Vycm9yKHRleHQpe1xyXG4gIFN3YWwuZmlyZSh7XHJcbiAgICAgIHBvc2l0aW9uOiAndG9wLWVuZCcsXHJcbiAgICAgIGljb246ICdlcnJvcicsXHJcbiAgICAgIHRpdGxlOiB0ZXh0LFxyXG4gICAgICBwYWRkaW5nOiAnMmVtJyxcclxuXHJcbiAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgIGNvbG9yOiAncmVkJyxcclxuICAgICAgYmFja2dyb3VuZDogJyNFQUVBRUEnLFxyXG5cclxuICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLFxyXG4gICAgICB0aW1lcjogMzUwMCxcclxuXHJcbiAgICAgIHRvYXN0OiB0cnVlLFxyXG4gIH0pXHJcbn1cclxuXHJcblxyXG4iLCIkKFwiW2RhdGEtZmFuY3lib3hdXCIpLmZhbmN5Ym94KHtcclxuICAgIHRvdWNoOiBmYWxzZVxyXG59KTsiLCJsZXQgb3dsX3NlcnZjaWVzID0gJCgnLm93bC1jYXJvdXNlbC0tc2VydmljZXMnKS5vd2xDYXJvdXNlbCh7XHJcbiAgICBzbGlkZVNwZWVkOiAzMDAsXHJcbiAgICBwYWdpbmF0aW9uU3BlZWQ6IDQwMCxcclxuICAgIGNlbnRlcjogdHJ1ZSxcclxuICAgIHN0b3BPbkhvdmVyOiB0cnVlLFxyXG4gICAgYXV0b3BsYXk6IDEwMCxcclxuICAgIGxvb3A6IHRydWUsXHJcbiAgICBtYXJnaW46IDUwLFxyXG59KTtcclxuXHJcblxyXG5cclxuJCgnLmNhcm91c2VsLXNlcnZpY2VzX19uZXh0JykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICBvd2xfc2VydmNpZXMudHJpZ2dlcignbmV4dC5vd2wuY2Fyb3VzZWwnLCBbMzAwXSk7XHJcbn0pXHJcblxyXG4kKCcuY2Fyb3VzZWwtc2VydmljZXNfX3ByZXYnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIG93bF9zZXJ2Y2llcy50cmlnZ2VyKCdwcmV2Lm93bC5jYXJvdXNlbCcsIFszMDBdKTtcclxufSlcclxuXHJcblxyXG5cclxuXHJcbiQoJy5jYXJvdXNlbC1zZXJ2aWNlcy1kb3QnKS5jbGljayhmdW5jdGlvbihpbmRleCwgZG90KXtcclxuICAgIGlmKCQoJy5jYXJvdXNlbC1zZXJ2aWNlcy1kb3RzJykuaGFzQ2xhc3MoJ2ZpeGVkJykpe1xyXG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6ICQoYC5jYXJkX19idG5bZGF0YS1zbGlkZT0nJHskKHRoaXMpLmRhdGEoJ3NsaWRlJyl9J11gKS5wYXJlbnRzKCcuY2FyZCcpLm9mZnNldCgpLnRvcH0sIDEwMDApO1xyXG4gICAgfVxyXG59KTtcclxuXHJcblxyXG5cclxuXHJcbi8qIGxldCBvd2xfc3VibWl0X2FwcGxpY2F0aW9uID0gJCgnLm93bC1jYXJvdXNlbC0tc3VibWl0LWFwcGxpY2F0aW9uJykub3dsQ2Fyb3VzZWwoe1xyXG4gICAgc2xpZGVTcGVlZDogMzAwLFxyXG4gICAgcGFnaW5hdGlvblNwZWVkOiA0MDAsXHJcbiAgICBjZW50ZXI6IHRydWUsXHJcbiAgICBzdG9wT25Ib3ZlcjogdHJ1ZSxcclxuICAgIGl0ZW1zOiA0LFxyXG4gICAgYXV0b3BsYXk6IDEwMCxcclxuICAgIGxvb3A6IHRydWUsXHJcbiAgICBtYXJnaW46IDMwLFxyXG59KTtcclxuXHJcbiAqL1xyXG5cclxuXHJcbiIsIiQoJy5jYXJkX19idG4nKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgIGxldCBjYXJkX25hbWUgPSAkKHRoaXMpLnNpYmxpbmdzKCcuY2FyZF9fdGl0bGUnKS50ZXh0KCk7XHJcblxyXG5cclxuICAgICQuZmFuY3lib3gub3Blbih7XHJcbiAgICAgICAgc3JjOiAnLnN1Ym1pdC1hcHBsaWNhdGlvbicsXHJcbiAgICAgICAgdHlwZTogJ2lubGluZScsXHJcbiAgICAgICAgdG91Y2g6IGZhbHNlLFxyXG4vKiAgICAgICAgIGhlaWdodDogODcwLFxyXG4gICAgICAgIHdpZHRoOiA2MDAsICovXHJcbiAgICAgICAgYXV0b1NpemU6IHRydWUsXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5cclxuXHJcblxyXG4kKCcuc3VibWl0LWFwcGxpY2F0aW9uLWZvcm0nKS52YWxpZGF0ZSh7XHJcbiAgICBydWxlczoge1xyXG4gICAgICAgIHBob25lOiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIG5hbWU6IHtcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgbWVzc2FnZXM6IHtcclxuICAgICAgICBwaG9uZToge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogXCLQktCy0LXQtNC40YLQtSDQvdC+0LzQtdGAINGC0LXQu9C10YTQvtC90LAhXCJcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBuYW1lOiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiBcItCS0LLQtdC00LjRgtC1INC40LzRjyFcIlxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgICAgICBzdWJtaXRIYW5kbGVyOiBmdW5jdGlvbihmb3JtKSB7XHJcbiAgICAgICAgICAgIHRocm90dGxlKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWN0aXZhdGVkX2l0ZW1zID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgJCgnLmJsb2NrLmFjdGl2ZSAuYmxvY2tfX3RpdGxlJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZF9pdGVtcy5wdXNoKCQodGhpcykudGV4dCgpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3BocC9zdWJtaXQtYXBwbGljYXRpb24ucGhwJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncG9zdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogJCgnLnN1Ym1pdC1hcHBsaWNhdGlvbi1mb3JtIGlucHV0W25hbWU9XCJwaG9uZVwiXScpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAkKCcuc3VibWl0LWFwcGxpY2F0aW9uLWZvcm0gaW5wdXRbbmFtZT1cIm5hbWVcIl0nKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV2aWV3OiAkKCcuc3VibWl0LWFwcGxpY2F0aW9uLWZvcm0gdGV4dGFyZWFbbmFtZT1cInJldmlld1wiJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBKU09OLnN0cmluZ2lmeShhY3RpdmF0ZWRfaXRlbXMpLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRBbGVydF9zdWNjKCfQl9Cw0Y/QstC60LAg0YPRgdC/0LXRiNC90L4g0L7RgtC/0YDQsNCy0LvQtdC90LAhINCe0LbQuNC00LDQudGC0LUg0L7RgtCy0LXRgtCwIScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pOyAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9LCAxODAwMDAsICdzdWJtaXQtYXBwbGljYXRpb24nKSgpO1xyXG4gICAgICAgIH1cclxufSk7XHJcblxyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwicGhvbmVcIiwgZnVuY3Rpb24odmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IC9eXFwrP1xcZHsxLDR9P1stLlxcc10/XFwoP1xcZHsxLDN9P1xcKT9bLS5cXHNdP1xcZHsxLDR9Wy0uXFxzXT9cXGR7MSw0fVstLlxcc10/XFxkezEsOX0kLy50ZXN0KHZhbHVlKTtcclxuICAgIH0sIFwi0J3QvtC80LXRgCDQstCy0LXQtNC10L0g0L3QtdC60L7RgNGA0LXQutGC0L3QviFcIik7Il19

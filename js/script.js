$("document").ready((function(){function e(){$(window).width()<992?$(".header .contacts__phone").appendTo(".header-left"):$(window).width()>992&&$(".header .contacts__phone").prependTo(".header__contacts")}$(window).resize((function(){e()})),e()}));const triggered_select=$(".block, .card__btn");let triggered_blocks=localStorage.getItem("triggered_blocks")?JSON.parse(localStorage.getItem("triggered_blocks")):[];function initBlocks(e){e.filter((function(e,t){if(-1!=triggered_blocks.indexOf($(t).data("slide")))return t})).each((function(){$(this).addClass("active"),$(this).find(".block__icon img").attr("src",$(this).find(".block__icon img").attr("src").replace(/\./g,"_active."))})),e.filter((function(e,t){if(-1==triggered_blocks.indexOf($(t).data("slide")))return t})).each((function(){$(this).removeClass("active"),$(this).find(".block__icon img").attr("src",$(this).find(".block__icon img").attr("src").replace(/_active/g,""))}));$(".submit-application-select__title > span").text($(".block.active").length)}triggered_select.click((function(){let e=$(this),t=e.data("slide");if(-1==$.inArray(t,triggered_blocks))triggered_blocks.push(t);else{if(0==e.hasClass("block"))return;triggered_blocks=$.grep(triggered_blocks,(function(e){return e!=t}))}localStorage.setItem("triggered_blocks",JSON.stringify(triggered_blocks)),initBlocks($(`.block[data-slide="${t}"]`))})),initBlocks($(".block")),$(".card").each((function(){let e=$(this).find(".gallery__image img"),t=e[Math.floor(Math.random()*e.length)].src;$(this).css("background-image",`url("${t}")`)}));let images=$(".gallery__image");function progressBar(){$(window).scrollTop(),$(window).height();let e=$(window).height(),t=$(document).height()-e,i=$(window).scrollTop()/t*100,o=$(".header__cover").height()/t*100;if(i<o){let e=(100-o+o-2*i)/100;if(e>.85)return;$(".header__cover").css("opacity",e)}}function throttle(e,t,i){let o=localStorage.getItem(`time-${i}`)?localStorage.getItem(`time-${i}`):void 0;return function(...r){null==o&&(o=$.now(),localStorage.setItem(`time-${i}`,o),e(...r)),$.now()-o>t?(o=$.now(),localStorage.setItem(`time-${i}`,o),e(...r)):getAlert_error(`Подождите еще ${(t/1e3-($.now()-o)/1e3).toFixed(0)} секунд!`)}}function getAlert_succ(e){Swal.fire({position:"top-end",icon:"success",title:e,padding:"2em",width:"100%",color:"#232122",background:"#EAEAEA",showConfirmButton:!1,timer:3500,toast:!0})}function getAlert_error(e){Swal.fire({position:"top-end",icon:"error",title:e,padding:"2em",width:"100%",color:"red",background:"#EAEAEA",showConfirmButton:!1,timer:3500,toast:!0})}images.mouseover((function(){let e=$(this),t=$(this).find("img").attr("src");e.parents(".card").css("background-image",`url("${t}")`)})),$("[data-fancybox]").fancybox({touch:!1}),$(window).scroll(progressBar),$('a[href^="#"]').on("click",(function(e){e.preventDefault();var t,i=$(this.hash);i.length&&(t=$(window).width()<768?120:220,$("html, body").animate({scrollTop:i.offset().top-t},400))})),$(window).on("touchmove",(function(){$('a[href^="#"]').data("clicked",!1)})),$(document).on("touchend",'a[href^="#"]',(function(e){$(this).data("clicked")&&(e.preventDefault(),$(this).data("clicked",!1))}));let owl_servcies=$(".owl-carousel--services").owlCarousel({slideSpeed:300,paginationSpeed:400,center:!0,stopOnHover:!0,autoplay:100,loop:!0,margin:50});$(".carousel-services__next").click((function(){owl_servcies.trigger("next.owl.carousel",[300])})),$(".carousel-services__prev").click((function(){owl_servcies.trigger("prev.owl.carousel",[300])})),$(".carousel-services-dot").click((function(e,t){$(".carousel-services-dots").hasClass("fixed")&&$("html, body").animate({scrollTop:$(`.card__btn[data-slide='${$(this).data("slide")}']`).parents(".card").offset().top},1e3)})),$(".card__btn").click((function(e){$(this).siblings(".card__title").text();$.fancybox.open({src:".submit-application",type:"inline",touch:!1,autoSize:!0})})),$(".submit-application-form").validate({rules:{phone:{required:!0},name:{required:!0}},messages:{phone:{required:"Введите номер телефона!"},name:{required:"Введите имя!"}},submitHandler:function(e){throttle((function(){let e=[];$(".block.active .block__title").each((function(){e.push($(this).text())})),$.ajax({url:"/php/submit-application.php",type:"post",data:{phone:$('.submit-application-form input[name="phone"]').val(),name:$('.submit-application-form input[name="name"]').val(),review:$('.submit-application-form textarea[name="review"').val(),selected:JSON.stringify(e)},success:function(e){getAlert_succ("Заявка успешно отправлена! Ожидайте ответа!")}})}),18e4,"submit-application")()}}),$.validator.addMethod("phone",(function(e,t){return this.optional(t)||/^\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}$/.test(e)}),"Номер введен некорректно!"),sal();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkYXB0aXZlLmpzIiwic2VsZWN0ZWRCbG9ja3MuanMiLCJjYXJkcy5qcyIsImhlYWRlcl9ib3R0b20uanMiLCJoZWxwZWQuanMiLCJmYW5jeS1ib3guanMiLCJvd2wtY2Fyb3VzZWwuanMiLCJzdWJtaXQtYXBwbGljYXRpb24uanMiLCJzYWwuanMiXSwibmFtZXMiOlsiJCIsInJlYWR5IiwiYWRhcHRpdmUiLCJ3aW5kb3ciLCJ3aWR0aCIsImFwcGVuZFRvIiwicHJlcGVuZFRvIiwicmVzaXplIiwidHJpZ2dlcmVkX3NlbGVjdCIsInRyaWdnZXJlZF9ibG9ja3MiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwiaW5pdEJsb2NrcyIsImRhdGEiLCJmaWx0ZXIiLCJpbmRleCIsIml0ZW0iLCJpbmRleE9mIiwiZWFjaCIsInRoaXMiLCJhZGRDbGFzcyIsImZpbmQiLCJhdHRyIiwicmVwbGFjZSIsInJlbW92ZUNsYXNzIiwidGV4dCIsImxlbmd0aCIsImNsaWNrIiwidHJpZ2dlciIsImJsb2NrX2luZGV4IiwiaW5BcnJheSIsInB1c2giLCJoYXNDbGFzcyIsImdyZXAiLCJ2YWx1ZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJjYXJkX19pbWFnZXMiLCJjYXJkX19pbWFnZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInNyYyIsImNzcyIsImltYWdlcyIsInByb2dyZXNzQmFyIiwic2Nyb2xsVG9wIiwiaGVpZ2h0Iiwid2luSCIsImJhc2VYIiwiZG9jdW1lbnQiLCJhIiwiYiIsIm9wYWNpdHkiLCJ0aHJvdHRsZSIsImZ1bmMiLCJzZWNvbmRzIiwibmFtZSIsInRpbWVyIiwidW5kZWZpbmVkIiwiYXJncyIsIm5vdyIsImdldEFsZXJ0X2Vycm9yIiwidG9GaXhlZCIsImdldEFsZXJ0X3N1Y2MiLCJTd2FsIiwiZmlyZSIsInBvc2l0aW9uIiwiaWNvbiIsInRpdGxlIiwicGFkZGluZyIsImNvbG9yIiwiYmFja2dyb3VuZCIsInNob3dDb25maXJtQnV0dG9uIiwidG9hc3QiLCJtb3VzZW92ZXIiLCJ0aGlzX2ltYWdlIiwidGhpc19zcmMiLCJwYXJlbnRzIiwiZmFuY3lib3giLCJ0b3VjaCIsInNjcm9sbCIsIm9uIiwidCIsInByZXZlbnREZWZhdWx0IiwiZSIsIm4iLCJoYXNoIiwiYW5pbWF0ZSIsIm9mZnNldCIsInRvcCIsIm93bF9zZXJ2Y2llcyIsIm93bENhcm91c2VsIiwic2xpZGVTcGVlZCIsInBhZ2luYXRpb25TcGVlZCIsImNlbnRlciIsInN0b3BPbkhvdmVyIiwiYXV0b3BsYXkiLCJsb29wIiwibWFyZ2luIiwiZG90Iiwic2libGluZ3MiLCJvcGVuIiwidHlwZSIsImF1dG9TaXplIiwidmFsaWRhdGUiLCJydWxlcyIsInBob25lIiwicmVxdWlyZWQiLCJtZXNzYWdlcyIsInN1Ym1pdEhhbmRsZXIiLCJmb3JtIiwiYWN0aXZhdGVkX2l0ZW1zIiwiYWpheCIsInVybCIsInZhbCIsInJldmlldyIsInNlbGVjdGVkIiwic3VjY2VzcyIsInZhbGlkYXRvciIsImFkZE1ldGhvZCIsImVsZW1lbnQiLCJvcHRpb25hbCIsInRlc3QiLCJzYWwiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFBLFlBQUFDLE9BQUEsV0FDQSxTQUFBQyxJQUNBRixFQUFBRyxRQUFBQyxRQUFBLElBQ0FKLEVBQUEsNEJBQUFLLFNBQUEsZ0JBQ0FMLEVBQUFHLFFBQUFDLFFBQUEsS0FDQUosRUFBQSw0QkFBQU0sVUFBQSxvQkFFQSxDQUVBTixFQUFBRyxRQUFBSSxRQUFBLFdBQ0FMLEdBQ0EsSUFFQUEsR0FDQSxJQ2RBLE1BQUFNLGlCQUFBUixFQUFBLHNCQUNBLElBQUFTLGlCQUFBQyxhQUFBQyxRQUFBLG9CQUFBQyxLQUFBQyxNQUFBSCxhQUFBQyxRQUFBLHFCQUFBLEdBbUJBLFNBQUFHLFdBQUFDLEdBQ0FBLEVBQUFDLFFBQUEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBLEdBQUFULGlCQUFBVSxRQUFBbkIsRUFBQWtCLEdBQUFILEtBQUEsVUFDQSxPQUFBRyxDQUVBLElB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QTBGIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoJ2RvY3VtZW50JykucmVhZHkoZnVuY3Rpb24oKXtcclxuICAgIGZ1bmN0aW9uIGFkYXB0aXZlKCl7XHJcbiAgICAgICAgaWYoJCh3aW5kb3cpLndpZHRoKCkgPCA5OTIpe1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVyIC5jb250YWN0c19fcGhvbmUnKS5hcHBlbmRUbygnLmhlYWRlci1sZWZ0Jyk7XHJcbiAgICAgICAgfWVsc2UgaWYoJCh3aW5kb3cpLndpZHRoKCkgPiA5OTIpe1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVyIC5jb250YWN0c19fcGhvbmUnKS5wcmVwZW5kVG8oJy5oZWFkZXJfX2NvbnRhY3RzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKXtcclxuICAgICAgICBhZGFwdGl2ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYWRhcHRpdmUoKTtcclxufSk7IiwiY29uc3QgdHJpZ2dlcmVkX3NlbGVjdCA9ICQoJy5ibG9jaywgLmNhcmRfX2J0bicpO1xyXG5sZXQgdHJpZ2dlcmVkX2Jsb2NrcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0cmlnZ2VyZWRfYmxvY2tzJykgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0cmlnZ2VyZWRfYmxvY2tzJykpIDpbXTtcclxuXHJcbnRyaWdnZXJlZF9zZWxlY3QuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgIGxldCB0cmlnZ2VyID0gJCh0aGlzKTtcclxuICAgIGxldCBibG9ja19pbmRleCA9IHRyaWdnZXIuZGF0YSgnc2xpZGUnKTtcclxuXHJcbiAgICBpZigkLmluQXJyYXkoYmxvY2tfaW5kZXgsIHRyaWdnZXJlZF9ibG9ja3MpID09IC0xKXtcclxuICAgICAgICB0cmlnZ2VyZWRfYmxvY2tzLnB1c2goYmxvY2tfaW5kZXgpO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgaWYodHJpZ2dlci5oYXNDbGFzcygnYmxvY2snKSA9PSBmYWxzZSkgcmV0dXJuO1xyXG4gICAgICAgIHRyaWdnZXJlZF9ibG9ja3MgPSAkLmdyZXAodHJpZ2dlcmVkX2Jsb2NrcywgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlICE9IGJsb2NrX2luZGV4O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0cmlnZ2VyZWRfYmxvY2tzJywgSlNPTi5zdHJpbmdpZnkodHJpZ2dlcmVkX2Jsb2NrcykpO1xyXG4gICAgaW5pdEJsb2NrcygkKGAuYmxvY2tbZGF0YS1zbGlkZT1cIiR7YmxvY2tfaW5kZXh9XCJdYCkpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGluaXRCbG9ja3MoZGF0YSl7XHJcbiAgICBsZXQgaGF2ZWRfYXJyID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24oaW5kZXgsIGl0ZW0pe1xyXG4gICAgICAgIGlmKHRyaWdnZXJlZF9ibG9ja3MuaW5kZXhPZigkKGl0ZW0pLmRhdGEoJ3NsaWRlJykpICE9IC0xKXtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgfVxyXG4gICAgfSkuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAkKHRoaXMpLmZpbmQoJy5ibG9ja19faWNvbiBpbWcnKS5hdHRyKCdzcmMnLCAkKHRoaXMpLmZpbmQoJy5ibG9ja19faWNvbiBpbWcnKS5hdHRyKCdzcmMnKS5yZXBsYWNlKC9cXC4vZywnX2FjdGl2ZS4nKSk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgbGV0IGNsZWFyX2FyciA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uKGluZGV4LCBpdGVtKXtcclxuICAgICAgICBpZih0cmlnZ2VyZWRfYmxvY2tzLmluZGV4T2YoJChpdGVtKS5kYXRhKCdzbGlkZScpKSA9PSAtMSl7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgIH1cclxuICAgIH0pLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJy5ibG9ja19faWNvbiBpbWcnKS5hdHRyKCdzcmMnLCAkKHRoaXMpLmZpbmQoJy5ibG9ja19faWNvbiBpbWcnKS5hdHRyKCdzcmMnKS5yZXBsYWNlKC9fYWN0aXZlL2csICcnKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuc3VibWl0LWFwcGxpY2F0aW9uLXNlbGVjdF9fdGl0bGUgPiBzcGFuJykudGV4dCgkKCcuYmxvY2suYWN0aXZlJykubGVuZ3RoKTtcclxufVxyXG5cclxuXHJcblxyXG5pbml0QmxvY2tzKCQoJy5ibG9jaycpKTsiLCJcclxuJCgnLmNhcmQnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgbGV0IGNhcmRfX2ltYWdlcyA9ICQodGhpcykuZmluZCgnLmdhbGxlcnlfX2ltYWdlIGltZycpO1xyXG4gIGxldCBjYXJkX19pbWFnZSA9IGNhcmRfX2ltYWdlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqY2FyZF9faW1hZ2VzLmxlbmd0aCldLnNyYztcclxuICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsIGB1cmwoXCIke2NhcmRfX2ltYWdlfVwiKWApO1xyXG59KTtcclxuXHJcbmxldCBpbWFnZXMgPSAkKCcuZ2FsbGVyeV9faW1hZ2UnKTtcclxuXHJcbmltYWdlcy5tb3VzZW92ZXIoZnVuY3Rpb24oKXtcclxuICBsZXQgdGhpc19pbWFnZSA9ICQodGhpcyk7XHJcbiAgbGV0IHRoaXNfc3JjID0gJCh0aGlzKS5maW5kKCdpbWcnKS5hdHRyKCdzcmMnKTtcclxuICBcclxuICB0aGlzX2ltYWdlLnBhcmVudHMoJy5jYXJkJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgYHVybChcIiR7dGhpc19zcmN9XCIpYCk7XHJcbn0pO1xyXG4iLCJmdW5jdGlvbiBwcm9ncmVzc0JhcigpIHtcclxuICAgIGxldCBzY3JvbGxQb3MgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcbiAgICBsZXQgV2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG5cclxuXHJcbiAgICBsZXQgd2luSCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuICAgIGxldCBkb2NIID0gJChkb2N1bWVudCkuaGVpZ2h0KCk7XHJcblxyXG5cclxuXHJcbiAgICBsZXQgYmFzZVggPSBkb2NIIC0gd2luSDtcclxuXHJcbiAgICBsZXQgYSA9ICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgLyBiYXNlWCkgKiAxMDA7XHJcbiAgICBsZXQgYiA9ICgkKCcuaGVhZGVyX19jb3ZlcicpLmhlaWdodCgpIC8gYmFzZVgpICogMTAwO1xyXG5cclxuICAgIGlmKGEgPCBiKXtcclxuICAgICAgICBsZXQgc3BlZWQgPSBhICogMjtcclxuICAgICAgICBsZXQgb2Zmc2V0ID0gKDEwMCAtIGIpICsgYjtcclxuICAgICAgICBsZXQgb3BhY2l0eSA9IChvZmZzZXQgLSBzcGVlZCkgLyAxMDA7XHJcblxyXG5cclxuICAgICAgICBpZihvcGFjaXR5ID4gMC44NSkgcmV0dXJuO1xyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXJfX2NvdmVyJykuY3NzKCdvcGFjaXR5Jywgb3BhY2l0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuXHJcblxyXG5cclxuJCh3aW5kb3cpLnNjcm9sbChwcm9ncmVzc0Jhcik7IiwiZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgc2Vjb25kcywgbmFtZSl7XHJcbiAgICBsZXQgdGltZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgdGltZS0ke25hbWV9YCkgPyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgdGltZS0ke25hbWV9YCkgOiB1bmRlZmluZWQ7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncyl7XHJcbiAgICAgICAgaWYodGltZXIgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGltZXIgPSAkLm5vdygpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgdGltZS0ke25hbWV9YCwgdGltZXIpO1xyXG4gICAgICAgICAgICBmdW5jKC4uLmFyZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZigkLm5vdygpIC0gdGltZXIgPiBzZWNvbmRzKXtcclxuICAgICAgICAgICAgdGltZXIgPSAkLm5vdygpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgdGltZS0ke25hbWV9YCwgdGltZXIpO1xyXG4gICAgICAgICAgICBmdW5jKC4uLmFyZ3MpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBnZXRBbGVydF9lcnJvcihg0J/QvtC00L7QttC00LjRgtC1INC10YnQtSAkeyhzZWNvbmRzIC8gMTAwMCAtICgkLm5vdygpIC0gdGltZXIpIC8gMTAwMCkudG9GaXhlZCgwKX0g0YHQtdC60YPQvdC0IWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGdldEFsZXJ0X3N1Y2ModGV4dCl7XHJcbiAgICBTd2FsLmZpcmUoe1xyXG4gICAgICAgIHBvc2l0aW9uOiAndG9wLWVuZCcsXHJcbiAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIHRpdGxlOiB0ZXh0LFxyXG4gICAgICAgIHBhZGRpbmc6ICcyZW0nLFxyXG5cclxuICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgIGNvbG9yOiAnIzIzMjEyMicsXHJcbiAgICAgICAgYmFja2dyb3VuZDogJyNFQUVBRUEnLFxyXG5cclxuICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsXHJcbiAgICAgICAgdGltZXI6IDM1MDAsXHJcblxyXG4gICAgICAgIHRvYXN0OiB0cnVlLFxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QWxlcnRfZXJyb3IodGV4dCl7XHJcbiAgU3dhbC5maXJlKHtcclxuICAgICAgcG9zaXRpb246ICd0b3AtZW5kJyxcclxuICAgICAgaWNvbjogJ2Vycm9yJyxcclxuICAgICAgdGl0bGU6IHRleHQsXHJcbiAgICAgIHBhZGRpbmc6ICcyZW0nLFxyXG5cclxuICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgY29sb3I6ICdyZWQnLFxyXG4gICAgICBiYWNrZ3JvdW5kOiAnI0VBRUFFQScsXHJcblxyXG4gICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsXHJcbiAgICAgIHRpbWVyOiAzNTAwLFxyXG5cclxuICAgICAgdG9hc3Q6IHRydWUsXHJcbiAgfSlcclxufVxyXG5cclxuXHJcbiQoJ2FbaHJlZl49XCIjXCJdJykub24oXCJjbGlja1wiLCBmdW5jdGlvbih0KSB7XHJcbiAgICB0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgZSwgbiA9ICQodGhpcy5oYXNoKTtcclxuICAgIG4ubGVuZ3RoICYmIChlID0gJCh3aW5kb3cpLndpZHRoKCkgPCA3NjggPyAxMjAgOiAyMjAsICQoXCJodG1sLCBib2R5XCIpLmFuaW1hdGUoe1xyXG4gICAgICAgIHNjcm9sbFRvcDogbi5vZmZzZXQoKS50b3AgLSBlXHJcbiAgICB9LCA0MDApKVxyXG59KSwgJCh3aW5kb3cpLm9uKFwidG91Y2htb3ZlXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgJCgnYVtocmVmXj1cIiNcIl0nKS5kYXRhKFwiY2xpY2tlZFwiLCAhMSlcclxufSksICQoZG9jdW1lbnQpLm9uKFwidG91Y2hlbmRcIiwgJ2FbaHJlZl49XCIjXCJdJywgZnVuY3Rpb24odCkge1xyXG4gICAgJCh0aGlzKS5kYXRhKFwiY2xpY2tlZFwiKSAmJiAodC5wcmV2ZW50RGVmYXVsdCgpLCAkKHRoaXMpLmRhdGEoXCJjbGlja2VkXCIsICExKSlcclxufSkiLCIkKFwiW2RhdGEtZmFuY3lib3hdXCIpLmZhbmN5Ym94KHtcclxuICAgIHRvdWNoOiBmYWxzZVxyXG59KTsiLCJsZXQgb3dsX3NlcnZjaWVzID0gJCgnLm93bC1jYXJvdXNlbC0tc2VydmljZXMnKS5vd2xDYXJvdXNlbCh7XHJcbiAgICBzbGlkZVNwZWVkOiAzMDAsXHJcbiAgICBwYWdpbmF0aW9uU3BlZWQ6IDQwMCxcclxuICAgIGNlbnRlcjogdHJ1ZSxcclxuICAgIHN0b3BPbkhvdmVyOiB0cnVlLFxyXG4gICAgYXV0b3BsYXk6IDEwMCxcclxuICAgIGxvb3A6IHRydWUsXHJcbiAgICBtYXJnaW46IDUwLFxyXG59KTtcclxuXHJcblxyXG5cclxuJCgnLmNhcm91c2VsLXNlcnZpY2VzX19uZXh0JykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICBvd2xfc2VydmNpZXMudHJpZ2dlcignbmV4dC5vd2wuY2Fyb3VzZWwnLCBbMzAwXSk7XHJcbn0pXHJcblxyXG4kKCcuY2Fyb3VzZWwtc2VydmljZXNfX3ByZXYnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIG93bF9zZXJ2Y2llcy50cmlnZ2VyKCdwcmV2Lm93bC5jYXJvdXNlbCcsIFszMDBdKTtcclxufSlcclxuXHJcblxyXG5cclxuXHJcbiQoJy5jYXJvdXNlbC1zZXJ2aWNlcy1kb3QnKS5jbGljayhmdW5jdGlvbihpbmRleCwgZG90KXtcclxuICAgIGlmKCQoJy5jYXJvdXNlbC1zZXJ2aWNlcy1kb3RzJykuaGFzQ2xhc3MoJ2ZpeGVkJykpe1xyXG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6ICQoYC5jYXJkX19idG5bZGF0YS1zbGlkZT0nJHskKHRoaXMpLmRhdGEoJ3NsaWRlJyl9J11gKS5wYXJlbnRzKCcuY2FyZCcpLm9mZnNldCgpLnRvcH0sIDEwMDApO1xyXG4gICAgfVxyXG59KTtcclxuXHJcblxyXG5cclxuXHJcbi8qIGxldCBvd2xfc3VibWl0X2FwcGxpY2F0aW9uID0gJCgnLm93bC1jYXJvdXNlbC0tc3VibWl0LWFwcGxpY2F0aW9uJykub3dsQ2Fyb3VzZWwoe1xyXG4gICAgc2xpZGVTcGVlZDogMzAwLFxyXG4gICAgcGFnaW5hdGlvblNwZWVkOiA0MDAsXHJcbiAgICBjZW50ZXI6IHRydWUsXHJcbiAgICBzdG9wT25Ib3ZlcjogdHJ1ZSxcclxuICAgIGl0ZW1zOiA0LFxyXG4gICAgYXV0b3BsYXk6IDEwMCxcclxuICAgIGxvb3A6IHRydWUsXHJcbiAgICBtYXJnaW46IDMwLFxyXG59KTtcclxuXHJcbiAqL1xyXG5cclxuXHJcbiIsIiQoJy5jYXJkX19idG4nKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgIGxldCBjYXJkX25hbWUgPSAkKHRoaXMpLnNpYmxpbmdzKCcuY2FyZF9fdGl0bGUnKS50ZXh0KCk7XHJcblxyXG5cclxuICAgICQuZmFuY3lib3gub3Blbih7XHJcbiAgICAgICAgc3JjOiAnLnN1Ym1pdC1hcHBsaWNhdGlvbicsXHJcbiAgICAgICAgdHlwZTogJ2lubGluZScsXHJcbiAgICAgICAgdG91Y2g6IGZhbHNlLFxyXG4vKiAgICAgICAgIGhlaWdodDogODcwLFxyXG4gICAgICAgIHdpZHRoOiA2MDAsICovXHJcbiAgICAgICAgYXV0b1NpemU6IHRydWUsXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5cclxuXHJcblxyXG4kKCcuc3VibWl0LWFwcGxpY2F0aW9uLWZvcm0nKS52YWxpZGF0ZSh7XHJcbiAgICBydWxlczoge1xyXG4gICAgICAgIHBob25lOiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIG5hbWU6IHtcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgbWVzc2FnZXM6IHtcclxuICAgICAgICBwaG9uZToge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogXCLQktCy0LXQtNC40YLQtSDQvdC+0LzQtdGAINGC0LXQu9C10YTQvtC90LAhXCJcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBuYW1lOiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiBcItCS0LLQtdC00LjRgtC1INC40LzRjyFcIlxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgICAgICBzdWJtaXRIYW5kbGVyOiBmdW5jdGlvbihmb3JtKSB7XHJcbiAgICAgICAgICAgIHRocm90dGxlKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWN0aXZhdGVkX2l0ZW1zID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgJCgnLmJsb2NrLmFjdGl2ZSAuYmxvY2tfX3RpdGxlJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZF9pdGVtcy5wdXNoKCQodGhpcykudGV4dCgpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3BocC9zdWJtaXQtYXBwbGljYXRpb24ucGhwJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncG9zdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogJCgnLnN1Ym1pdC1hcHBsaWNhdGlvbi1mb3JtIGlucHV0W25hbWU9XCJwaG9uZVwiXScpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAkKCcuc3VibWl0LWFwcGxpY2F0aW9uLWZvcm0gaW5wdXRbbmFtZT1cIm5hbWVcIl0nKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV2aWV3OiAkKCcuc3VibWl0LWFwcGxpY2F0aW9uLWZvcm0gdGV4dGFyZWFbbmFtZT1cInJldmlld1wiJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBKU09OLnN0cmluZ2lmeShhY3RpdmF0ZWRfaXRlbXMpLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRBbGVydF9zdWNjKCfQl9Cw0Y/QstC60LAg0YPRgdC/0LXRiNC90L4g0L7RgtC/0YDQsNCy0LvQtdC90LAhINCe0LbQuNC00LDQudGC0LUg0L7RgtCy0LXRgtCwIScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pOyAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9LCAxODAwMDAsICdzdWJtaXQtYXBwbGljYXRpb24nKSgpO1xyXG4gICAgICAgIH1cclxufSk7XHJcblxyXG5cclxuJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwicGhvbmVcIiwgZnVuY3Rpb24odmFsdWUsIGVsZW1lbnQpIHtcclxuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IC9eXFwrP1xcZHsxLDR9P1stLlxcc10/XFwoP1xcZHsxLDN9P1xcKT9bLS5cXHNdP1xcZHsxLDR9Wy0uXFxzXT9cXGR7MSw0fVstLlxcc10/XFxkezEsOX0kLy50ZXN0KHZhbHVlKTtcclxuICAgIH0sIFwi0J3QvtC80LXRgCDQstCy0LXQtNC10L0g0L3QtdC60L7RgNGA0LXQutGC0L3QviFcIik7Iiwic2FsKCk7Il19
